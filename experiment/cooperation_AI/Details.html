{% extends "global/Page.html" %}

{% block title %}
    Player Detail
{% endblock %}

{% block content %}
<div class="container">
    <div class="row">
        <div class="col-md-8 offset-md-2 text-center">
            <div class="result-card">

                <!-- Player i's Total Payoff -->
                <h2 style="color: #2C3E50; font-weight: 600;">
                    Player {{ detail_player.id_in_group }}'s Total Payoff
                </h2>
                <p style="font-size: 1.2em; color: #000000;">
                    <strong>
                        Total accumulated payoff: 
                        <span style="color: #2980B9;">
                            {{ detail_player.participant.payoff }}
                        </span>
                    </strong>
                </p>

                <hr style="border-color: #BDC3C7; border-width: 1px; margin: 30px 0;">

                <!-- Experiment Summary for this specific player -->
                <h3 style="color: #2C3E50;">Experiment Summary</h3>
                <p><strong>Condition:</strong> {{ detail_player.player_condition }}</p>

                <table class="summary-table">
                    <thead>
                        <tr>
                            <th>Condition</th>
                            <th>Acceptance Rate of Advice</th>
                            <th>Cooperation Rate</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- No Advice row -->
                        <tr>
                            <td>No Advice</td>
                            <td></td> <!-- Blank acceptance rate for No Advice -->
                            <td>
                                {% if detail_player.cooperation_no is not none %}
                                    {{ detail_player.cooperation_no }}%
                                {% endif %}
                            </td>
                        </tr>
                        <!-- Expert’s Advice row -->
                        <tr>
                            <td>Expert’s Advice</td>
                            <td>
                                {% if detail_player.acceptance_expert is not none %}
                                    {{ detail_player.acceptance_expert }}%
                                {% endif %}
                            </td>
                            <td>
                                {% if detail_player.cooperation_expert is not none %}
                                    {{ detail_player.cooperation_expert }}%
                                {% endif %}
                            </td>
                        </tr>
                        <!-- AI Advice row -->
                        <tr>
                            <td>AI Advice</td>
                            <td>
                                {% if detail_player.acceptance_ai is not none %}
                                    {{ detail_player.acceptance_ai }}%
                                {% endif %}
                            </td>
                            <td>
                                {% if detail_player.cooperation_ai is not none %}
                                    {{ detail_player.cooperation_ai }}%
                                {% endif %}
                            </td>
                        </tr>
                    </tbody>
                </table>

                <!-- Overall cooperation rate for this player -->
                <p style="margin-top: 20px;">
                    <strong>Overall Cooperation Rate (Player {{ detail_player.id_in_group }}):</strong> 
                    {{ detail_player.overall_cooperation }}%
                </p>

                <hr style="border-color: #BDC3C7; border-width: 1px; margin: 30px 0;">

                <!-- Go Back button -->
                <button class="btn btn-secondary" onclick="history.back()">Go Back</button>

            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block styles %}
<style>
    .result-card {
        background-color: #FFFFFF;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        margin-bottom: 30px;
    }

    h2 {
        font-weight: 600;
    }

    h3 {
        font-size: 1.5em;
        color: #2C3E50;
        margin-bottom: 20px;
    }

    .summary-table {
        width: 100%;
        margin: 0 auto;
        border-collapse: collapse;
    }
    .summary-table thead th {
        border-bottom: 2px solid #BDC3C7;
        padding-bottom: 8px;
    }
    .summary-table tbody td {
        padding: 10px 0;
        border-bottom: 1px solid #ecf0f1;
    }
    .summary-table td,
    .summary-table th {
        text-align: center;
    }

    .btn-secondary {
        background-color: #6c757d;
        color: white;
        border: none;
        padding: 10px 20px;
        margin-top: 20px;
        border-radius: 8px;
        cursor: pointer;
    }
    .btn-secondary:hover {
        background-color: #5a6268;
    }
</style>
{% endblock %}
